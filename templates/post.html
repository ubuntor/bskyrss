<div>{% for segment in segments %}{% if segment["type"] == "text" %}{{ segment["value"] | nl2br }}{% elif segment["type"] == "link" %}<a href="{{ segment["url"] }}">{{ segment["text"] }}</a>{% elif segment["type"] == "image" %}<div><img src="{{ segment["url"] }}" alt="{{ segment["alt"] }}"></div>{% elif segment["type"] == "video" %}<div><img alt="Preview image representing video embedded in the post" src="{{ segment["thumbnail"] }}"></div>{% elif segment["type"] == "extlink" %}<a href="{{ segment["url"] }}"><figure>{% if segment["thumbnail"] %}<div><img src="{{ segment["thumbnail"] }}">{% endif %}<figcaption><span><b>{{ segment["text"] }}</b></span><br>{{ segment["description"] }}</figcaption></figure></a></div>{% elif segment["type"] == "reply" %}<blockquote>{% for subseg in segment["subsegs"] %}{% if subseg["type"] == "post" %}<div><a href="{{ subseg["url"] }}"><b>Post by {{ subseg["name"] }}</b></a><br><small>{{ subseg["date"] }}</small></div><div>{{ subseg["html"] | safe }}</div>{% elif subseg["type"] == "placeholder" %}{{ subseg["text"] }}{% elif subseg["type"] == "reply_gap" %}<div>{{ subseg["html"] | safe }}</div>{% endif %}{% endfor %}</blockquote>{% elif segment["type"] == "quotepost" %}<blockquote><div>{% if segment["name"] %}<a href="{{ segment["url"] }}"><b>Quoted post by {{ segment["name"] }}</b></a><br><small>{{ segment["date"] }}</small></div><div>{{ segment["html"] | safe }}{% else %}<a href="{{ segment["url"] }}"><b>Quoted post</b></a>{% endif %}</div></blockquote>{% elif segment["type"] == "placeholder" %}<blockquote>{{ segment["text"] }}</blockquote>{% endif %}{% endfor %}</div>
