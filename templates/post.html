<div>{% for segment in segments %}{% if segment["type"] == "text" %}{{ segment["value"] }}{% elif segment["type"] == "link" %}<a href="{{ segment["url"] }}">{{ segment["text"] }}</a>{% elif segment["type"] == "image" %}<br><img src="{{ segment["url"] }}" alt="{{ segment["alt"] }}">{% elif segment["type"] == "video" %}<br><img alt="Preview image representing video embedded in the post" src="{{ segment["thumbnail"] }}">{% elif segment["type"] == "extlink" %}<br><a href="{{ segment["url"] }}"><figure>{% if segment["thumbnail"] %}<img src="{{ segment["thumbnail"] }}">{% endif %}<figcaption><span><b>{{ segment["text"] }}</b></span><br>{{ segment["description"] }}</figcaption></figure></a>{% elif segment["type"] == "reply" %}<blockquote>{% for subseg in segment["subsegs"] %}{% if subseg["type"] == "post" %}<div><a href="{{ subseg["url"] }}"><b>Post by {{ subseg["name"] }}</b></a><br><small>{{ subseg["date"] }}</small></div><div>{{ subseg["html"] | safe }}</div>{% elif subseg["type"] == "placeholder" %}{{ subseg["text"] }}{% elif subseg["type"] == "reply_gap" %}<div>&vellip;</div>{% endif %}{% endfor %}</blockquote>{% elif segment["type"] == "quotepost" %}<blockquote><div><a href="{{ segment["url"] }}"><b>Quoted post by {{ segment["name"] }}</b></a><br><small>{{ segment["date"] }}</small></div><div>{{ segment["html"] | safe }}</div></blockquote>{% elif segment["type"] == "placeholder" %}<blockquote>{{ segment["text"] }}</blockquote>{% endif %}{% endfor %}</div>
