<div>{% for segment in segments %}{% if segment["type"] == "text" %}<p>{% for subseg in segment["subsegs"] %}{% if subseg["type"] == "text" %}{{ subseg["value"] | nl2br }}{% elif subseg["type"] == "link" %}<a href="{{ subseg["url"] }}">{{ subseg["text"] | nl2br }}</a>{% endif %}{% endfor %}</p>{% elif segment["type"] == "image" %}<p><img src="{{ segment["url"] }}" alt="{{ segment["alt"] }}"></p>{% elif segment["type"] == "video" %}<p><img alt="Preview image representing video embedded in the post" src="{{ segment["thumbnail"] }}"></p>{% elif segment["type"] == "extlink" %}<a href="{{ segment["url"] }}"><figure>{% if segment["thumbnail"] %}<img src="{{ segment["thumbnail"] }}">{% endif %}<figcaption><b>{{ segment["text"] }}</b><br>{{ segment["description"] }}</figcaption></figure></a>{% elif segment["type"] == "reply" %}<blockquote>{% for subseg in segment["subsegs"] %}{% if subseg["type"] == "post" %}<p><a href="{{ subseg["url"] }}"><b>Post by {{ subseg["name"] }}</b></a><br><small>{{ subseg["date"] }}</small></p>{{ subseg["html"] | safe }}{% elif subseg["type"] == "placeholder" %}<p>{{ subseg["text"] }}</p>{% elif subseg["type"] == "reply_gap" %}<p>{{ subseg["html"] | safe }}</p>{% endif %}{% endfor %}</blockquote>{% elif segment["type"] == "quotepost" %}<blockquote><p>{% if segment["name"] %}<a href="{{ segment["url"] }}"><b>Quoted post by {{ segment["name"] }}</b></a><br><small>{{ segment["date"] }}</small></p><p>{{ segment["html"] | safe }}{% else %}<a href="{{ segment["url"] }}"><b>Quoted post</b></a>{% endif %}</p></blockquote>{% elif segment["type"] == "placeholder" %}<blockquote>{{ segment["text"] }}</blockquote>{% endif %}{% endfor %}</div>
